<script setup>
import LessonSlides from '../LessonSlides/LessonSlides.vue'
import { useLearningProgress } from '@/composables/system/useLearningProgress'
const lessonTitle = 'Lesson 2: Phases of Loop Execution'
const lessonDescription = 'Understanding the three phases of loop execution in C'
const topicId = 3 // Topic
const lessonId = 2 // Lesson
const slides = [
  {
    id: 1,
    title: 'Introduction',
    content: `Think of doing your morning routine:
1Ô∏è‚É£ You wake up (start).
2Ô∏è‚É£ You check the time (condition).
3Ô∏è‚É£ If it's still early, you go back to sleep ‚Äî if not, you get up.
4Ô∏è‚É£ You repeat the process until it's time to wake up for real!

That's how loops work in programming. Each loop follows certain phases ‚Äî it starts, checks a condition, repeats if needed, and then stops when done.

üí° These are called the phases of loop execution.`,
  },
  {
    id: 2,
    title: 'Concept Explanation',
    content: `Every loop in C (like while, do‚Äìwhile, or for) follows three main phases in each repetition:

1Ô∏è‚É£ Initialization ‚Äì Set up your starting point (e.g., int i = 1;)
2Ô∏è‚É£ Condition Checking ‚Äì The loop runs only if the condition is true.
3Ô∏è‚É£ Update / Increment ‚Äì Change the loop variable so the program knows when to stop.

Example:`,
    code: `int i = 1;              // Initialization
while (i <= 3) {        // Condition check
    printf("%d ", i);   // Body of the loop
    i++;                // Update
}`,
    explanation: `üí° The computer checks the condition before every repetition. When it becomes false, the loop ends.`,
  },
  {
    id: 3,
    title: 'Check for Understanding (1)',
    multipleQuiz: [
      {
        question: 'Which phase happens first in any loop?',
        interactive: true,
        blanks: [{ id: 1, answer: 'Initialization' }],
        template: 'Answer: [1]',
        options: ['Initialization', 'Condition Checking', 'Update'],
      },
    ],
  },
  {
    id: 4,
    title: 'Check for Understanding (2)',
    multipleQuiz: [
      {
        question: 'The loop continues to execute as long as the [__________] is true.',
        interactive: true,
        blanks: [{ id: 1, answer: 'condition' }],
        template: 'Answer: [1]',
        options: ['initialization', 'condition', 'update'],
      },
    ],
  },
  {
    id: 5,
    title: 'Guided Example',
    content: `Let's look at an example showing all three phases together üëá`,
    code: `#include <stdio.h>
int main() {
    int num = 1;                 // Initialization
    while (num <= 3) {           // Condition
        printf("%d\\n", num);     // Body
        num++;                   // Update
    }
    return 0;
}`,
    explanation: `Step-by-step flow:
1Ô∏è‚É£ num starts at 1 (Initialization)
2Ô∏è‚É£ Condition num <= 3 ‚Üí true, so the loop runs
3Ô∏è‚É£ Prints 1, then increases num to 2 (Update)
4Ô∏è‚É£ Goes back and checks the condition again
5Ô∏è‚É£ Stops when num becomes 4 (Condition = false)`,
  },
  {
    id: 6,
    title: 'Check for Understanding (3)',
    multipleQuiz: [
      {
        question:
          'What happens if you skip the update phase in a loop?\nThe loop will [__________].',
        interactive: true,
        blanks: [{ id: 1, answer: 'run infinitely' }],
        template: 'Answer: [1]',
        options: ['run infinitely', 'stop immediately', 'print an error'],
      },
    ],
  },
  {
    id: 7,
    title: 'Quick Practice',
    content: `Fill in the blanks to identify the three phases in this code:`,
    code: `int x = 0;              // [__________]
while (x < 5) {         // [__________]
    printf("%d ", x);
    x++;                // [__________]
}`,
    multipleQuiz: [
      {
        question: 'Identify the three phases:',
        interactive: true,
        blanks: [
          { id: 1, answer: 'Initialization' },
          { id: 2, answer: 'Condition Checking' },
          { id: 3, answer: 'Update' },
        ],
        template: 'int x = 0; // [1]\nwhile (x < 5) { // [2]\n    ...\n    x++; // [3]',
        options: ['Condition Checking', 'Initialization', 'Update'],
      },
    ],
  },
  {
    id: 8,
    title: 'Lesson Takeaways',
    content: `Key Points to Remember:

‚Ä¢ Every loop follows three main phases:
  1Ô∏è‚É£ Initialization ‚Äì sets up the starting value
  2Ô∏è‚É£ Condition Checking ‚Äì decides if the loop continues
  3Ô∏è‚É£ Update ‚Äì moves toward ending the loop

‚Ä¢ Skipping the update causes infinite loops.
‚Ä¢ Understanding these phases helps you control and predict how loops behave.`,
  },
]
const { completeLesson } = useLearningProgress()
function handleLessonComplete() {
  completeLesson(topicId, lessonId)
}
</script>

<template>
  <LessonSlides
    :lesson-title="lessonTitle"
    :lesson-description="lessonDescription"
    :slides="slides"
    :topic-id="topicId"
    :lesson-id="lessonId"
    back-route="/"
    complete-route="/"
    @lesson-complete="handleLessonComplete"
  />
</template>
